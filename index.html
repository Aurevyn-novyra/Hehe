<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cinematic Proposal</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;height:100%;background:#05000c;color:#fff;font-family:system-ui,Segoe UI,Arial,sans-serif;overflow:hidden}

canvas{position:fixed;inset:0}

.glass{
backdrop-filter:blur(16px);
background:rgba(255,255,255,0.06);
border:1px solid rgba(255,255,255,0.15);
box-shadow:0 30px 120px rgba(140,60,255,0.4), inset 0 0 25px rgba(255,255,255,0.05);
border-radius:60px;
padding:18px 55px;
font-size:18px;
color:#fff;
cursor:pointer;
pointer-events:auto;
animation:glowPulse 2s ease-in-out infinite;
}

@keyframes glowPulse{
0%{box-shadow:0 0 40px rgba(160,90,255,0.3)}
50%{box-shadow:0 0 100px rgba(200,120,255,0.8)}
100%{box-shadow:0 0 40px rgba(160,90,255,0.3)}
}

.ui{
position:fixed;inset:0;z-index:10;
display:flex;flex-direction:column;
align-items:center;justify-content:center;
text-align:center;pointer-events:none;
}

.fade{transition:1.2s ease}

.poemBox{
max-width:90vw;
background:rgba(0,0,0,0.6);
padding:30px;border-radius:25px;
backdrop-filter:blur(12px);
box-shadow:0 40px 100px rgba(0,0,0,0.85);
}

.line{min-height:2em;font-size:clamp(16px,3vw,20px);margin:6px 0}

.overlay{
position:fixed;inset:0;z-index:20;
background:rgba(0,0,0,0.65);
display:flex;align-items:center;justify-content:center;
opacity:0;pointer-events:none;transition:1s ease;
}

.card{
background:rgba(0,0,0,0.7);
border-radius:25px;padding:35px;
border:1px solid rgba(255,255,255,0.15);
box-shadow:0 40px 120px rgba(0,0,0,0.9);
pointer-events:auto;
}

.smallMsg{
margin-bottom:25px;
font-size:clamp(16px,3vw,22px);
line-height:1.4;
}
</style>

</head>

<body>

<canvas id="space"></canvas> <canvas id="tulip"></canvas> <canvas id="petal"></canvas>

<div class="ui">
<button id="startBtn" class="glass fade">Tap Here</button>

<div id="continueWrap" style="display:none;margin-top:20px">
<button id="continueBtn" class="glass">Continue</button>
</div>

<div id="poemWrap" style="display:none">
<div class="poemBox">
<div class="line" id="poem1"></div>
<div class="line" id="poem2"></div>
</div>
<button id="poemNext" class="glass" style="margin-top:20px">Next</button>
</div>

<div id="lastWrap" style="display:none;margin-top:40px">
<button id="lastBtn" class="glass">One Last Surprise</button>
</div>
</div>

<div class="overlay" id="overlay">
<div class="card">
<div class="smallMsg" id="sorryText">
So Sorry Bittuuu betuuu babuuuu chotuu priyanshuu chikuuuuu yawll<br>
maaf krdeyy for my bad behavior<br>
I'm so so so sorry Betuuuuuu<br>
maaf krdeyy bccheyyy<br>
ywr meko please
</div>

<div id="question" style="font-size:24px;margin-bottom:20px">Will you be my universe?</div>
<button id="yesBtn" class="glass">YES</button>
<button id="noBtn" class="glass" style="margin-left:10px">NO</button>
</div>
</div>

<script>
(()=>{

// ------------------ Canvas Setup ------------------
const space=document.getElementById('space');
const tulipCanvas=document.getElementById('tulip');
const petalCanvas=document.getElementById('petal');

const sctx=space.getContext('2d');
const tctx=tulipCanvas.getContext('2d');
const pctx=petalCanvas.getContext('2d');

let w,h;
function resize(){
w=innerWidth;h=innerHeight;
[space,tulipCanvas,petalCanvas].forEach(c=>{
c.width=w*devicePixelRatio;
c.height=h*devicePixelRatio;
c.style.width=w+"px";
c.style.height=h+"px";
c.getContext("2d").setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
});
}
addEventListener('resize',resize);resize();

// ------------------ Audio System ------------------
let ac;
function initAudio(){ if(!ac) ac=new (AudioContext||webkitAudioContext)(); }

function whoosh(){
if(!ac)return;
let o=ac.createOscillator(),g=ac.createGain();
o.type="sawtooth";o.frequency.value=80;
o.connect(g);g.connect(ac.destination);
g.gain.value=0;
g.gain.linearRampToValueAtTime(0.4,ac.currentTime+0.05);
g.gain.exponentialRampToValueAtTime(0.001,ac.currentTime+1.2);
o.start();o.stop(ac.currentTime+1.3);
}

function heartbeat(){
if(!ac)return;
let t=ac.currentTime;
for(let i=0;i<2;i++){
let o=ac.createOscillator(),g=ac.createGain();
o.frequency.value=60;
o.connect(g);g.connect(ac.destination);
g.gain.setValueAtTime(0.8,t+i*0.4);
g.gain.exponentialRampToValueAtTime(0.001,t+i*0.4+0.25);
o.start(t+i*0.4);o.stop(t+i*0.4+0.3);
}
}

function chime(){
if(!ac)return;
let t=ac.currentTime;
[440,660,880].forEach((f,i)=>{
let o=ac.createOscillator(),g=ac.createGain();
o.type="sine";o.frequency.value=f;
o.connect(g);g.connect(ac.destination);
g.gain.value=0;
g.gain.linearRampToValueAtTime(0.4/(i+1),t+0.05);
g.gain.exponentialRampToValueAtTime(0.001,t+3);
o.start();o.stop(t+3);
});
}

// ------------------ Stars ------------------
let stars=Array.from({length:300},()=>({x:Math.random()*w,y:Math.random()*h,r:Math.random()*2}));

// ------------------ Tulips ------------------
let tulips=[], petals=[];
function createTulips(){
tulips=[];
for(let i=0;i<120;i++){
let d=Math.random();
tulips.push({
x:Math.random()*w,
y:h*(0.45+d*0.55),
depth:d,
size:35+d*65,
hue:320+Math.random()*40,
phase:Math.random()*Math.PI*2
});
}
tulips.sort((a,b)=>a.depth-b.depth);
}

// ------------------ Drawing Loop ------------------
function draw(){
sctx.clearRect(0,0,w,h);
let g=sctx.createLinearGradient(0,0,0,h);
g.addColorStop(0,"#070014");
g.addColorStop(1,"#00000a");
sctx.fillStyle=g;sctx.fillRect(0,0,w,h);

// stars
stars.forEach(st=>{
sctx.beginPath();
sctx.globalAlpha=0.2+Math.sin(Date.now()*0.002+st.x)*0.4;
sctx.fillStyle="#fff";
sctx.arc(st.x,st.y,st.r,0,Math.PI*2);
sctx.fill();
});
sctx.globalAlpha=1;

// tulips
tctx.clearRect(0,0,w,h);
tulips.forEach(t=>{
let sway=Math.sin(Date.now()*0.002+t.phase)*18*(1-t.depth);
let x=t.x+sway, y=t.y;

// stem
tctx.strokeStyle="rgba(20,100,50,0.7)";
tctx.lineWidth=3*(0.5+t.depth);
tctx.beginPath();
tctx.moveTo(x,y);
tctx.bezierCurveTo(x-20,y+90,x+20,y+160,x,y+250);
tctx.stroke();

// petals
let grad=tctx.createRadialGradient(x,y,0,x,y,t.size);
grad.addColorStop(0,"#fff");
grad.addColorStop(1,`hsl(${t.hue},85%,55%)`);
tctx.fillStyle=grad;
for(let j=0;j<4;j++){
tctx.beginPath();
tctx.ellipse(x+(j-1.5)*10,y,t.size*0.7,t.size,0,0,Math.PI*2);
tctx.fill();
}
});

// floating petals
pctx.clearRect(0,0,w,h);
petals.forEach((p,i)=>{
p.y+=p.vy;p.x+=p.vx;
if(p.y>h)petals.splice(i,1);
pctx.beginPath();
pctx.fillStyle=`hsl(${p.h},80%,65%)`;
pctx.ellipse(p.x,p.y,8,14,0,0,Math.PI*2);
pctx.fill();
});

requestAnimationFrame(draw);
}
draw();

// ------------------ UI Logic ------------------
const startBtn=document.getElementById('startBtn');
const continueWrap=document.getElementById('continueWrap');
const continueBtn=document.getElementById('continueBtn');
const poemWrap=document.getElementById('poemWrap');
const poem1=document.getElementById('poem1');
const poem2=document.getElementById('poem2');
const poemNext=document.getElementById('poemNext');
const lastWrap=document.getElementById('lastWrap');
const lastBtn=document.getElementById('lastBtn');
const overlay=document.getElementById('overlay');
const yesBtn=document.getElementById('yesBtn');
const noBtn=document.getElementById('noBtn');

startBtn.onclick=()=>{
initAudio();
whoosh();
startBtn.style.opacity=0;
setTimeout(()=>{
startBtn.style.display="none";
createTulips();
continueWrap.style.display="block";
},800);
};

continueBtn.onclick=()=>{
heartbeat();
continueWrap.style.display="none";
poemWrap.style.display="block";
showPoem();
};

const poemText=`Sometimes I think I fell for you
before I even learned how falling works.
My words trip over themselves..
And as I said earlier.. you're like a Luminous Singularity
which's parallel yet coincidently intersecting...
Like constellations shuffled in a hurry...
Orion losing its belt..
Cassiopeia sitting upside down..
and whole sky is asking "Why is she the only one shining this bright?"
And I swear ... 
every time i try to explain what you mean to me.. I fumble..I'm scared...
and my heart chooses Your tulips instead of sentences 
petals arranged in a wrong order.. yet beautiful..
Colors mixing where they shouldn't yet somehow looking eternal..
and it's strange how You make the universe feel like a misprinted bouquet..
Galaxies scribbled over with your name..
planets orbiting a little too close..
a pull like the Black hole..
Like they too forgot their distance.
And me? I'm jst a boy holding a bouquet thinking maybe if I say it wrong enough times
you Might hear the truth hidden between the mistakes
That in every star's cold shimmer and every tulip's quite softness
i keep finding you 
not perfectly..
not clearly 
but completely...`.split("\n");

let pIndex=0;
function typeLine(el,text){
let i=0;el.textContent="";
let t=setInterval(()=>{
el.textContent=text.slice(0,++i);
if(i>=text.length)clearInterval(t);
},25);
}

function showPoem(){
if(pIndex>=poemText.length){
poemWrap.style.display="none";
lastWrap.style.display="block";
return;
}
typeLine(poem1,poemText[pIndex]||"");
typeLine(poem2,poemText[pIndex+1]||"");
pIndex+=2;
}

poemNext.onclick=showPoem;

lastBtn.onclick=()=>{
chime();
lastWrap.style.display="none";
for(let i=0;i<150;i++){
petals.push({x:Math.random()*w,y:-10,vx:(Math.random()-.5)*1.5,vy:1.5+Math.random()*2.4,h:320+Math.random()*40});
}
overlay.style.pointerEvents="auto";
overlay.style.opacity=1;
};

// Yes / No
yesBtn.onclick=()=>{
for(let i=0;i<200;i++){
petals.push({x:Math.random()*w,y:h/2,vx:(Math.random()-.5)*3,vy:Math.random()*-3,h:0});
}
};

let dodge=0;
noBtn.onmouseenter=noBtn.onclick=()=>{
if(dodge<2){
dodge++;
noBtn.style.transform=`translate(${Math.random()*120-60}px,${Math.random()*80-40}px)`;
}else{ yesBtn.click(); }
};

})();
</script>

</body>
</html>
