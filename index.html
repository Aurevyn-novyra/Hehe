<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Question for You</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Georgia', serif;
  overflow: hidden;
  background: #0a0a0a;
  color: #fff;
  height: 100vh;
  width: 100vw;
}

.scene {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  opacity: 0;
  pointer-events: none;
  transition: opacity 1s ease;
}

.scene.active {
  opacity: 1;
  pointer-events: auto;
}

#starfield {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.intro-text {
  font-size: clamp(1.5rem, 4vw, 2.5rem);
  text-align: center;
  color: #ffb3d9;
  text-shadow: 0 0 20px rgba(255, 179, 217, 0.6);
  margin-bottom: 40px;
  opacity: 0;
  animation: fadeInLetters 3s forwards;
}

@keyframes fadeInLetters {
  to { opacity: 1; }
}

.tap-button {
  padding: 20px 50px;
  font-size: 1.5rem;
  background: linear-gradient(135deg, #ff6b9d, #c44569);
  border: none;
  border-radius: 50px;
  color: white;
  cursor: pointer;
  box-shadow: 0 0 30px rgba(255, 107, 157, 0.6);
  animation: pulse 2s infinite;
  min-height: 54px;
  font-weight: bold;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); box-shadow: 0 0 30px rgba(255, 107, 157, 0.6); }
  50% { transform: scale(1.05); box-shadow: 0 0 50px rgba(255, 107, 157, 0.9); }
}

.tap-button:hover {
  transform: scale(1.08);
}

#tulipCanvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.continue-btn, .last-btn, .replay-btn {
  padding: 18px 45px;
  font-size: 1.3rem;
  background: linear-gradient(135deg, #667eea, #764ba2);
  border: none;
  border-radius: 50px;
  color: white;
  cursor: pointer;
  box-shadow: 0 0 25px rgba(102, 126, 234, 0.5);
  margin-top: 30px;
  min-height: 54px;
  font-weight: bold;
  opacity: 0;
  animation: fadeIn 1.5s forwards;
}

@keyframes fadeIn {
  to { opacity: 1; }
}

.continue-btn:hover, .last-btn:hover, .replay-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 0 35px rgba(102, 126, 234, 0.8);
}

.poem-container {
  max-width: 90%;
  width: 700px;
  text-align: center;
  padding: 40px;
  background: rgba(0, 0, 0, 0.6);
  border-radius: 20px;
  line-height: 1.8;
  font-size: clamp(1rem, 2.5vw, 1.3rem);
  color: #ffd6e8;
  text-shadow: 0 0 10px rgba(255, 214, 232, 0.3);
  overflow-y: auto;
  max-height: 80vh;
}

.poem-line {
  opacity: 0;
  margin: 10px 0;
}

.bouquet-container {
  position: relative;
  width: 100%;
  height: 100%;
}

.proposal-text {
  font-size: clamp(2rem, 5vw, 3.5rem);
  text-align: center;
  color: #ffb3d9;
  text-shadow: 0 0 30px rgba(255, 179, 217, 0.8);
  margin-bottom: 50px;
  animation: glow 2s infinite alternate;
}

@keyframes glow {
  from { text-shadow: 0 0 30px rgba(255, 179, 217, 0.8); }
  to { text-shadow: 0 0 50px rgba(255, 179, 217, 1); }
}

.choice-buttons {
  display: flex;
  gap: 30px;
  flex-wrap: wrap;
  justify-content: center;
}

.yes-btn, .no-btn {
  padding: 20px 60px;
  font-size: 1.5rem;
  border: none;
  border-radius: 50px;
  cursor: pointer;
  min-height: 54px;
  font-weight: bold;
  transition: all 0.3s;
}

.yes-btn {
  background: linear-gradient(135deg, #11998e, #38ef7d);
  color: white;
  box-shadow: 0 0 30px rgba(56, 239, 125, 0.6);
}

.yes-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 0 50px rgba(56, 239, 125, 0.9);
}

.no-btn {
  background: linear-gradient(135deg, #ee0979, #ff6a00);
  color: white;
  box-shadow: 0 0 30px rgba(238, 9, 121, 0.6);
}

.petal {
  position: absolute;
  width: 10px;
  height: 15px;
  background: radial-gradient(ellipse at center, #ffb3d9 0%, #ff6b9d 100%);
  border-radius: 50% 50% 50% 0;
  opacity: 0;
  pointer-events: none;
}

@keyframes petalFall {
  to {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

.vignette {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  box-shadow: inset 0 0 150px rgba(0, 0, 0, 0.8);
}

@media (max-width: 768px) {
  .poem-container {
    padding: 25px;
    font-size: 1.1rem;
  }
  
  .choice-buttons {
    flex-direction: column;
    gap: 20px;
  }
}
</style>
</head>
<body>

<div class="vignette"></div>

<!-- SCENE 1: Cosmic Intro -->
<div class="scene active" id="scene1">
  <canvas id="starfield"></canvas>
  <div class="intro-text">This isn't a normal websiteâ€¦</div>
  <button class="tap-button" id="tapBtn">TAP ME</button>
</div>

<!-- SCENE 2: Tulip Field -->
<div class="scene" id="scene2">
  <canvas id="tulipCanvas"></canvas>
  <button class="continue-btn" id="continueBtn">Continue</button>
</div>

<!-- SCENE 3: Poem -->
<div class="scene" id="scene3">
  <div class="poem-container" id="poemContainer"></div>
  <button class="replay-btn" id="replayBtn" style="display:none;">Replay Poem</button>
</div>

<!-- SCENE 4: Emotional Buildup -->
<div class="scene" id="scene4">
  <button class="last-btn" id="lastBtn">One last thingâ€¦</button>
</div>

<!-- SCENE 5: Bouquet Formation -->
<div class="scene" id="scene5">
  <canvas id="bouquetCanvas"></canvas>
</div>

<!-- SCENE 6: Proposal -->
<div class="scene" id="scene6">
  <div class="proposal-text">Will you be my universe? ðŸ’«</div>
  <div class="choice-buttons">
    <button class="yes-btn" id="yesBtn">YES</button>
    <button class="no-btn" id="noBtn">NO</button>
  </div>
</div>

<script>
// Audio Engine
class SoundEngine {
  constructor() {
    this.ctx = new (window.AudioContext || window.webkitAudioContext)();
    this.masterGain = this.ctx.createGain();
    this.masterGain.connect(this.ctx.destination);
    this.masterGain.gain.value = 0.3;
  }

  playDrone() {
    try {
      const osc = this.ctx.createOscillator();
      const gain = this.ctx.createGain();
      osc.frequency.value = 55;
      osc.type = 'sine';
      gain.gain.value = 0.1;
      osc.connect(gain);
      gain.connect(this.masterGain);
      osc.start();
      osc.stop(this.ctx.currentTime + 5);
    } catch(e) {}
  }

  playHeartbeat() {
    try {
      const beat = () => {
        const osc = this.ctx.createOscillator();
        const gain = this.ctx.createGain();
        osc.frequency.value = 80;
        osc.type = 'sine';
        gain.gain.setValueAtTime(0.2, this.ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.1);
        osc.connect(gain);
        gain.connect(this.masterGain);
        osc.start();
        osc.stop(this.ctx.currentTime + 0.1);
      };
      beat();
      setTimeout(beat, 200);
    } catch(e) {}
  }

  playWhoosh() {
    try {
      const osc = this.ctx.createOscillator();
      const gain = this.ctx.createGain();
      osc.frequency.setValueAtTime(800, this.ctx.currentTime);
      osc.frequency.exponentialRampToValueAtTime(100, this.ctx.currentTime + 0.3);
      gain.gain.setValueAtTime(0.1, this.ctx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.3);
      osc.connect(gain);
      gain.connect(this.masterGain);
      osc.start();
      osc.stop(this.ctx.currentTime + 0.3);
    } catch(e) {}
  }

  playChime() {
    try {
      const osc = this.ctx.createOscillator();
      const gain = this.ctx.createGain();
      osc.frequency.value = 1200;
      osc.type = 'sine';
      gain.gain.setValueAtTime(0.15, this.ctx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.5);
      osc.connect(gain);
      gain.connect(this.masterGain);
      osc.start();
      osc.stop(this.ctx.currentTime + 0.5);
    } catch(e) {}
  }

  playRomanticChime() {
    try {
      [523.25, 659.25, 783.99].forEach((freq, i) => {
        setTimeout(() => {
          const osc = this.ctx.createOscillator();
          const gain = this.ctx.createGain();
          osc.frequency.value = freq;
          osc.type = 'sine';
          gain.gain.setValueAtTime(0.2, this.ctx.currentTime);
          gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 1);
          osc.connect(gain);
          gain.connect(this.masterGain);
          osc.start();
          osc.stop(this.ctx.currentTime + 1);
        }, i * 150);
      });
    } catch(e) {}
  }

  playPiano() {
    try {
      const notes = [261.63, 329.63, 392.00, 523.25];
      notes.forEach((freq, i) => {
        setTimeout(() => {
          const osc = this.ctx.createOscillator();
          const gain = this.ctx.createGain();
          osc.frequency.value = freq;
          osc.type = 'triangle';
          gain.gain.setValueAtTime(0.1, this.ctx.currentTime);
          gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.8);
          osc.connect(gain);
          gain.connect(this.masterGain);
          osc.start();
          osc.stop(this.ctx.currentTime + 0.8);
        }, i * 400);
      });
    } catch(e) {}
  }
}

const sound = new SoundEngine();

// Scene Manager
let currentScene = 1;

function switchScene(sceneNum) {
  document.querySelectorAll('.scene').forEach(s => s.classList.remove('active'));
  document.getElementById('scene' + sceneNum).classList.add('active');
  currentScene = sceneNum;
}

// SCENE 1: Starfield
const starCanvas = document.getElementById('starfield');
const starCtx = starCanvas.getContext('2d');
starCanvas.width = window.innerWidth;
starCanvas.height = window.innerHeight;

const stars = [];
for (let i = 0; i < 200; i++) {
  stars.push({
    x: Math.random() * starCanvas.width,
    y: Math.random() * starCanvas.height,
    radius: Math.random() * 2,
    alpha: Math.random(),
    speed: Math.random() * 0.5
  });
}

function animateStars() {
  if (currentScene !== 1) return;
  starCtx.fillStyle = 'rgba(10, 10, 10, 0.1)';
  starCtx.fillRect(0, 0, starCanvas.width, starCanvas.height);
  
  stars.forEach(star => {
    star.alpha += star.speed * 0.01;
    if (star.alpha > 1) star.alpha = 0;
    starCtx.fillStyle = `rgba(255, 255, 255, ${star.alpha})`;
    starCtx.beginPath();
    starCtx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
    starCtx.fill();
  });
  
  requestAnimationFrame(animateStars);
}
animateStars();

sound.playDrone();
sound.playHeartbeat();

document.getElementById('tapBtn').addEventListener('click', () => {
  sound.playWhoosh();
  switchScene(2);
  setTimeout(() => initTulips(), 500);
});

// SCENE 2: Tulip Field
const tulipCanvas = document.getElementById('tulipCanvas');
const tulipCtx = tulipCanvas.getContext('2d');
tulipCanvas.width = window.innerWidth;
tulipCanvas.height = window.innerHeight;

function initTulips() {
  const tulips = [];
  const numTulips = 40;
  
  for (let i = 0; i < numTulips; i++) {
    tulips.push({
      x: Math.random() * tulipCanvas.width,
      y: tulipCanvas.height - Math.random() * 300 - 50,
      height: 80 + Math.random() * 60,
      color: ['#ff6b9d', '#ffb3d9', '#c44569', '#ff9ff3'][Math.floor(Math.random() * 4)],
      sway: Math.random() * Math.PI * 2,
      swaySpeed: 0.01 + Math.random() * 0.02,
      blur: Math.random() * 3
    });
  }
  
  function drawTulips() {
    if (currentScene !== 2) return;
    tulipCtx.fillStyle = 'rgba(10, 30, 20, 0.05)';
    tulipCtx.fillRect(0, 0, tulipCanvas.width, tulipCanvas.height);
    
    tulips.sort((a, b) => a.y - b.y);
    
    tulips.forEach(tulip => {
      tulip.sway += tulip.swaySpeed;
      const swayX = Math.sin(tulip.sway) * 10;
      
      tulipCtx.save();
      tulipCtx.filter = `blur(${tulip.blur}px)`;
      
      // Stem
      tulipCtx.strokeStyle = '#2d5016';
      tulipCtx.lineWidth = 3;
      tulipCtx.beginPath();
      tulipCtx.moveTo(tulip.x, tulipCanvas.height);
      tulipCtx.quadraticCurveTo(
        tulip.x + swayX / 2,
        tulip.y + tulip.height / 2,
        tulip.x + swayX,
        tulip.y
      );
      tulipCtx.stroke();
      
      // Petals
      const petalCount = 6;
      for (let i = 0; i < petalCount; i++) {
        const angle = (Math.PI * 2 / petalCount) * i;
        const px = tulip.x + swayX + Math.cos(angle) * 12;
        const py = tulip.y + Math.sin(angle) * 12;
        
        const gradient = tulipCtx.createRadialGradient(px, py, 0, px, py, 15);
        gradient.addColorStop(0, tulip.color);
        gradient.addColorStop(1, '#330011');
        
        tulipCtx.fillStyle = gradient;
        tulipCtx.beginPath();
        tulipCtx.ellipse(px, py, 10, 18, angle, 0, Math.PI * 2);
        tulipCtx.fill();
      }
      
      tulipCtx.restore();
    });
    
    requestAnimationFrame(drawTulips);
  }
  
  drawTulips();
  
  setTimeout(() => {
    document.getElementById('continueBtn').style.opacity = '1';
  }, 2000);
}

document.getElementById('continueBtn').addEventListener('click', () => {
  sound.playWhoosh();
  switchScene(3);
  setTimeout(() => showPoem(), 300);
});

// SCENE 3: Poem
const poemLines = [
  "Sometimes I think I fell for you",
  "before I even learned how falling works.",
  "My words trip over themselves..",
  "And as I said earlier.. you're like a Luminous Singularity",
  "which's parallel yet coincidently intersecting...",
  "Like constellations shuffled in a hurry...",
  "Orion losing its belt..",
  "Cassiopeia sitting upside down..",
  "and whole sky is asking \"Why is she the only one shining this bright?\"",
  "And I swear ...",
  "every time i try to explain what you mean to me.. I fumble..I'm scared...",
  "and my heart chooses Your tulips instead of sentences",
  "petals arranged in a wrong order.. yet beautiful..",
  "Colors mixing where they shouldn't yet somehow looking eternal..",
  "and it's strange how You make the universe feel like a misprinted bouquet..",
  "Galaxies scribbled over with your name..",
  "planets orbiting a little too close..",
  "a pull like the Black hole..",
  "Like they too forgot their distance.",
  "And me? I'm jst a boy holding a bouquet thinking maybe if I say it wrong enough times",
  "you Might hear the truth hidden between the mistakes",
  "That in every star's cold shimmer and every tulip's quite softness",
  "i keep finding you",
  "not perfectly..",
  "not clearly",
  "but completely..."
];

let poemIndex = 0;

function showPoem() {
  const container = document.getElementById('poemContainer');
  container.innerHTML = '';
  poemIndex = 0;
  
  function displayNextPair() {
    if (poemIndex >= poemLines.length) {
      setTimeout(() => {
        document.getElementById('replayBtn').style.display = 'block';
        setTimeout(() => {
          switchScene(4);
          sound.playPiano();
        }, 3000);
      }, 2000);
      return;
    }
    
    sound.playWhoosh();
    sound.playChime();
    
    for (let i = 0; i < 2 && poemIndex < poemLines.length; i++) {
      const line = document.createElement('div');
      line.className = 'poem-line';
      line.textContent = poemLines[poemIndex];
      container.appendChild(line);
      
      setTimeout(() => {
        line.style.opacity = '1';
        line.style.transition = 'opacity 1s ease';
      }, i * 500);
      
      poemIndex++;
    }
    
    setTimeout(displayNextPair, 2500);
  }
  
  displayNextPair();
}

document.getElementById('replayBtn').addEventListener('click', () => {
  document.getElementById('replayBtn').style.display = 'none';
  showPoem();
});

// SCENE 4: Emotional Buildup
document.getElementById('lastBtn').addEventListener('click', () => {
  sound.playWhoosh();
  switchScene(5);
  setTimeout(() => createBouquet(), 300);
});

// SCENE 5: Bouquet Formation
const bouquetCanvas = document.getElementById('bouquetCanvas');
const bouquetCtx = bouquetCanvas.getContext('2d');
bouquetCanvas.width = window.innerWidth;
bouquetCanvas.height = window.innerHeight;

function createBouquet() {
  const centerX = bouquetCanvas.width / 2;
  const centerY = bouquetCanvas.height / 2;
  
  const bouquetTulips = [];
  for (let i = 0; i < 15; i++) {
    bouquetTulips.push({
      startX: Math.random() * bouquetCanvas.width,
      startY: Math.random() * bouquetCanvas.height,
      endX: centerX + (Math.random() - 0.5) * 100,
      endY: centerY + i * 15 - 100,
      progress: 0,
      color: ['#ff6b9d', '#ffb3d9', '#c44569'][Math.floor(Math.random() * 3)]
    });
  }
  
  function animateBouquet() {
    bouquetCtx.fillStyle = 'rgba(10, 10, 10, 0.1)';
    bouquetCtx.fillRect(0, 0, bouquetCanvas.width, bouquetCanvas.height);
    
    let allDone = true;
    
    bouquetTulips.forEach(tulip => {
      if (tulip.progress < 1) {
        tulip.progress += 0.02;
        allDone = false;
      }
      
      const t = Math.min(tulip.progress, 1);
      const easeT = t * t * (3 - 2 * t);
      const x = tulip.startX + (tulip.endX - tulip.startX) * easeT;
      const y = tulip.startY + (tulip.endY - tulip.startY) * easeT;
      
      // Draw tulip
      bouquetCtx.fillStyle = '#2d5016';
      bouquetCtx.fillRect(x - 1, y, 2, 40);
      
      const gradient = bouquetCtx.createRadialGradient(x, y - 10, 0, x, y - 10, 12);
      gradient.addColorStop(0, tulip.color);
      gradient.addColorStop(1, '#660033');
      bouquetCtx.fillStyle = gradient;
      bouquetCtx.beginPath();
      bouquetCtx.ellipse(x, y - 10, 8, 12, 0, 0, Math.PI * 2);
      bouquetCtx.fill();
    });
    
    if (tulip.progress > 0.7) {
      // Draw ribbon
      bouquetCtx.strokeStyle = '#ff6b9d';
      bouquetCtx.lineWidth = 4;
      bouquetCtx.beginPath();
      bouquetCtx.arc(centerX, centerY + 20, 30, 0, Math.PI * 2);
      bouquetCtx.stroke();
    }
    
    if (!allDone) {
      requestAnimationFrame(animateBouquet);
    } else {
      setTimeout(() => {
        switchScene(6);
        sound.playPiano();
      }, 1000);
    }
  }
  
  animateBouquet();
}

// SCENE 6: Proposal
let noDodges = 0;

document.getElementById('noBtn').addEventListener('mouseover', function(e) {
  if (noDodges < 2) {
    const btn = e.target;
    const newX = Math.random() * (window.innerWidth - 200);
    const newY = Math.random() * (window.innerHeight - 200);
    btn.style.position = 'fixed';
    btn.style.left = newX + 'px';
    btn.style.top = newY + 'px';
    noDodges++;
    sound.playWhoosh();
  }
});

document.getElementById('yesBtn').addEventListener('click', () => {
  sound.playRomanticChime();
  createPetalRain();
  document.querySelector('.proposal-text').textContent = 'âœ¨ Forever and Always âœ¨';
  document.querySelector('.choice-buttons').style.display = 'none';
});

document.getElementById('noBtn').addEventListener('click', () => {
  if (noDodges >= 2) {
    alert('Are you sure? ðŸ¥º');
  }
});

function createPetalRain() {
  for (let i = 0; i < 50; i++) {
    setTimeout(() => {
      const petal = document.createElement('div');
      petal.className = 'petal';
      petal.style.left = Math.random() * 100 + '%';
      petal.style.top = '-20px';
      petal.style.opacity = '1';
      petal.style.animation = `petalFall ${3 + Math.random() * 2}s linear forwards`;
      petal.style.animationDelay = Math.random() * 2 + 's';
      document.body.appendChild(petal);
      
      setTimeout(() => petal.remove(), 6000);
    }, i * 100);
  }
}

// Auto-advance safety
let idleTimer;
function resetIdle() {
  clearTimeout(idleTimer);
  idleTimer = setTimeout(() => {
    if (currentScene < 6) {
      const nextBtn = document.querySelector(`#scene${currentScene} button`);
      if (nextBtn) nextBtn.click();
    }
  }, 10000);
}

document.addEventListener('click', resetIdle);
resetIdle();

window.addEventListener('resize', () => {
  starCanvas.width = window.innerWidth;
  starCanvas.height = window.innerHeight;
  tulipCanvas.width = window.innerWidth;
  tulipCanvas.height = window.innerHeight;
  bouquetCanvas.width = window.innerWidth;
  bouquetCanvas.height = window.innerHeight;
});
</script>
</body>
</html>
