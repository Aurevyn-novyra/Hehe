<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ria ‚Äî Will you be mine?</title>
  <style>
    :root{
      --bg:#07030a; /* deep */
      --accent:#ff5ca8; /* tulip pink */
      --accent2:#ffb4d9;
      --gold:#ffd27f;
      --glass: rgba(255,255,255,0.04);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(255,80,160,0.06), transparent),
                  linear-gradient(180deg,#06020a 0%, #09050f 60%);
      color:#fff;
      overflow-x:hidden;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Header */
    header{
      position:fixed;left:0;right:0;top:0;height:72px;display:flex;align-items:center;justify-content:space-between;padding:0 24px;z-index:40;
      backdrop-filter: blur(6px);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-bottom:1px solid rgba(255,255,255,0.03);
    }
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;box-shadow:0 8px 30px rgba(255,80,160,0.12)}
    .logo svg{width:26px;height:26px}
    h1{font-size:18px;margin:0}
    .controls{display:flex;gap:8px;align-items:center}
    button.btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:10px;color:var(--accent2);cursor:pointer}
    button.btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent2));border:0;color:#111;font-weight:700}

    main{padding-top:92px;padding-bottom:120px}
    .container{max-width:1100px;margin:40px auto;padding:28px}

    /* Hero */
    .hero{display:grid;grid-template-columns:1fr 420px;gap:32px;align-items:center}
    .hero-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:18px;padding:28px;box-shadow: 0 10px 50px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.03)}
    .lead{font-size:28px;line-height:1.06;color:#fff;margin-bottom:8px}
    .sub{color:rgba(255,255,255,0.6);margin-bottom:14px}

    /* Typewriter poem */
    .poem-wrap{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);min-height:220px;position:relative}
    .poem{white-space:pre-wrap;font-family: "Times New Roman", serif;font-size:16px;color:var(--accent2);line-height:1.5}
    .poem .highlight{color:var(--gold);font-weight:700}

    /* small panels */
    .panel{padding:12px;border-radius:10px;background:var(--glass);border:1px solid rgba(255,255,255,0.02);margin-bottom:12px}

    /* Games area */
    .games{display:grid;grid-template-columns:repeat(2,1fr);gap:18px}
    .game{min-height:160px;display:flex;flex-direction:column;justify-content:center;align-items:center}

    /* Heart/ tulip styles */
    .hearts{display:flex;flex-wrap:wrap;gap:12px;justify-content:center}
    .heart{width:74px;height:74px;border-radius:18px;background:linear-gradient(180deg,#fff3,#fff1);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:transform .25s}
    .heart svg{width:44px;height:44px;filter:drop-shadow(0 6px 16px rgba(255,70,140,0.18));}
    .heart:hover{transform:translateY(-8px) rotate(-4deg);}

    /* tulip clicker */
    .tulip-area{position:relative;overflow:hidden;height:220px;border-radius:12px}
    .tulip{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:96px;height:140px;cursor:pointer}

    /* compat meter */
    .meter{display:flex;gap:12px;align-items:center}
    .meter .bar{height:14px;border-radius:10px;background:linear-gradient(90deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));width:240px;overflow:hidden}
    .meter .fill{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--gold));border-radius:10px;transition:width 1.6s cubic-bezier(.2,.9,.2,1)}
    .meter input{padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:#fff}

    /* puzzle */
    .puzzle{display:flex;gap:12px}
    .puzzle button{padding:12px 16px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:#fff;cursor:pointer}

    /* final modal */
    .proposal-modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,1,6,0.6);backdrop-filter: blur(5px);z-index:70;opacity:0;pointer-events:none;transition:opacity .3s}
    .proposal-modal.show{opacity:1;pointer-events:auto}
    .proposal-card{width:920px;max-width:95%;border-radius:20px;padding:28px;background:linear-gradient(180deg, rgba(10,6,12,0.9), rgba(8,4,10,0.9));border:1px solid rgba(255,255,255,0.03);text-align:center}
    .proposal-card h2{font-size:34px;margin-bottom:16px}
    .proposal-actions{display:flex;gap:14px;justify-content:center;margin-top:22px}
    .big-btn{padding:12px 18px;border-radius:12px;border:0;font-size:16px}
    .yes{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#111}
    .no{background:transparent;border:1px solid rgba(255,255,255,0.06)}

    /* petals canvas */
    #petal-canvas{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:2}

    /* footer */
    footer{margin-top:36px;text-align:center;color:rgba(255,255,255,0.35);font-size:13px}

    /* small responsive */
    @media (max-width:920px){
      .hero{grid-template-columns:1fr;}
      .games{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <canvas id="petal-canvas"></canvas>
  <header>
    <div class="brand">
      <div class="logo" aria-hidden>
        <!-- tulip svg -->
        <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M32 6c6.6 0 12 5.4 12 12 0 6.6-12 20-12 20s-12-13.4-12-20c0-6.6 5.4-12 12-12z" fill="#fff" opacity=".92"/>
          <path d="M32 6c6.6 0 12 5.4 12 12 0 6.6-12 20-12 20s-12-13.4-12-20c0-6.6 5.4-12 12-12z" fill="url(#g)" opacity="0.25"/>
          <defs>
            <linearGradient id="g" x1="0" x2="1"><stop offset="0" stop-color="#ff5ca8"/><stop offset="1" stop-color="#ffb4d9"/></linearGradient>
          </defs>
        </svg>
      </div>
      <div>
        <h1>Ria ‚Äî a misprinted bouquet</h1>
        <div style="color:rgba(255,255,255,0.5);font-size:12px">A playful romantic proposal by Priyanshu</div>
      </div>
    </div>
    <div class="controls">
      <button class="btn" id="play-music">Play music</button>
      <button class="btn primary" id="open-propose">Propose</button>
    </div>
  </header>

  <main>
    <div class="container">
      <section class="hero">
        <div class="hero-card">
          <div class="lead">Ria ‚Äî will you walk through this misprinted sky with me?</div>
          <div class="sub">A playful, romantic little world made of tulips, stars, and a clumsy poet.</div>

          <div class="poem-wrap panel" aria-live="polite">
            <div class="poem" id="poem">
            </div>
          </div>

          <div style="display:flex;gap:12px;margin-top:14px;flex-wrap:wrap;">
            <div class="panel" style="flex:1;min-width:220px">
              <div style="font-size:13px;color:rgba(255,255,255,0.6);margin-bottom:8px">Quick games</div>
              <div class="games">
                <div class="game panel">
                  <strong style="display:block;margin-bottom:8px">Find My Heart</strong>
                  <div class="hearts" id="hearts">
                    <!-- hearts injected -->
                  </div>
                </div>

                <div class="game panel">
                  <strong style="display:block;margin-bottom:8px">Catch the Tulip</strong>
                  <div class="tulip-area" id="tulip-area">
                    <svg class="tulip" id="moving-tulip" viewBox="0 0 64 96" xmlns="http://www.w3.org/2000/svg">
                      <g>
                        <path d="M32 10c10 0 18 8 18 18 0 10-18 30-18 30s-18-20-18-30c0-10 8-18 18-18z" fill="#ff5ca8"/>
                        <path d="M40 56c0 12-16 20-16 20s-16-8-16-20c0-3 16-4 16-4s16 1 16 4z" fill="#5b8c3a"/>
                      </g>
                    </svg>
                  </div>
                </div>

                <div class="game panel">
                  <strong style="display:block;margin-bottom:8px">Compatibility Meter</strong>
                  <div style="display:flex;gap:8px;align-items:center">
                    <input id="name-input" placeholder="Type Ria's name" />
                    <button class="btn" id="calc-compat">Calculate</button>
                  </div>
                  <div style="margin-top:8px" class="meter">
                    <div class="bar"><div class="fill" id="compat-fill"></div></div>
                    <div id="compat-percent">--%</div>
                  </div>
                </div>

                <div class="game panel">
                  <strong style="display:block;margin-bottom:8px">Unlock My Heart</strong>
                  <div class="puzzle">
                    <button data-key="smile">Smile</button>
                    <button data-key="eyes">Eyes</button>
                    <button data-key="heart">Heart</button>
                  </div>
                </div>

              </div>
            </div>

            <div class="panel" style="width:300px;min-width:220px;">
              <div style="font-size:13px;color:rgba(255,255,255,0.6);margin-bottom:8px">Rules</div>
              <div style="font-size:13px;color:rgba(255,255,255,0.75)">Click hearts, catch tulips, and when the final moment comes ‚Äî press <strong>Propose</strong> or wait for me to ask.</div>
            </div>
          </div>

        </div>

        <aside class="hero-card panel" aria-hidden>
          <div style="text-align:center;margin-bottom:14px">
            <h3 style="margin:0;font-size:20px;">A little tulip garden</h3>
            <div style="color:rgba(255,255,255,0.6);font-size:13px">For Ria ‚Äî every petal for you</div>
          </div>

          <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px">
            <div class="panel" style="text-align:center">
              <div style="font-size:12px;color:rgba(255,255,255,0.6);margin-bottom:8px">Tulip Trail</div>
              <div style="font-size:22px;font-weight:700;color:var(--accent)">üå∑</div>
              <div style="font-size:12px;color:rgba(255,255,255,0.45);margin-top:8px">Petals follow the mouse</div>
            </div>
            <div class="panel" style="text-align:center">
              <div style="font-size:12px;color:rgba(255,255,255,0.6);margin-bottom:8px">Ring Preview</div>
              <div style="font-size:22px;font-weight:700;color:var(--gold)">üíç</div>
              <div style="font-size:12px;color:rgba(255,255,255,0.45);margin-top:8px">A tiny ring animation</div>
            </div>
            <div class="panel" style="text-align:center">
              <div style="font-size:12px;color:rgba(255,255,255,0.6);margin-bottom:8px">Yes Button</div>
              <div style="font-size:22px;font-weight:700;color:var(--accent)">‚úîÔ∏è</div>
              <div style="font-size:12px;color:rgba(255,255,255,0.45);margin-top:8px">Click to accept</div>
            </div>
          </div>

        </aside>
      </section>

      <footer>
        <div>Made with clumsy words, tulips & a little astronomy.</div>
      </footer>

    </div>
  </main>

  <!-- Proposal modal -->
  <div class="proposal-modal" id="proposal-modal" role="dialog" aria-modal="true">
    <div class="proposal-card">
      <h2 id="proposal-title">Ria‚Ä¶ will you be my forever?</h2>
      <p id="proposal-poem" style="color:rgba(255,255,255,0.7);max-width:720px;margin:0 auto">I wrote a small thing for you.</p>
      <div class="proposal-actions">
        <button class="big-btn yes" id="yes-btn">Yes</button>
        <button class="big-btn no" id="no-btn">No</button>
      </div>
    </div>
  </div>

  <script>
    // ---------- Poem content (from user) ----------
    const poemText = `Sometimes I think I fell for you
before I even learned how falling works.
My words trip over themselves..
And as I said earlier.. you're like a Luminous Singularity
which's parallel yet coincidently intersecting...
Like constellations shuffled in a hurry...
Orion losing its belt..
Cassiopeia sitting upside down..
and whole sky is asking "Why is she the only one shining this bright?"
And I swear ... 
every time i try to explain what you mean to me.. I fumble..I'm scared...
and my heart chooses Your tulips instead of sentences 
petals arranged in a wrong order.. yet beautiful..
Colors mixing where they shouldn't yet somehow looking eternal..
and it's strange how You make the universe feel like a misprinted bouquet..
Galaxies scribbled over with your name..
planets orbiting a little too close..
a pull like the Black hole..
Like they too forgot their distance.
And me? I'm jst a boy holding a bouquet thinking maybe if I say it wrong enough times
you Might hear the truth hidden between the mistakes
That in every star's cold shimmer and every tulip's quite softness
i keep finding you 
not perfectly..
not clearly 
but completely...`;

    // typewriter effect
    (function typePoem(){
      const el=document.getElementById('poem');
      let i=0;let speed=18; // typing speed
      function step(){
        if(i<=poemText.length){
          el.textContent = poemText.slice(0,i);
          i++;
          setTimeout(step,speed);
        }
      }
      step();
    })();

    // ---------- Petal canvas (floating tulip petals) ----------
    const canvas = document.getElementById('petal-canvas');
    const ctx = canvas.getContext('2d');
    let W, H; function resize(){W=canvas.width=innerWidth;H=canvas.height=innerHeight}
    addEventListener('resize',resize); resize();

    function rand(a,b){return a+Math.random()*(b-a)}
    // petal particles
    const petals=[];
    for(let i=0;i<60;i++){
      petals.push({x:rand(0,W),y:rand(-H, H),vx:rand(-0.3,0.3),vy:rand(0.2,1.4),r:rand(6,14),rot:rand(0,6.28),vr:rand(-0.02,0.02),col: `rgba(255,${120+~~rand(0,120)},${160+~~rand(0,80)},${0.9})`})
    }
    function drawPetal(p){
      ctx.save();ctx.translate(p.x,p.y);ctx.rotate(p.rot);
      ctx.beginPath();ctx.ellipse(0,0,p.r*0.7,p.r,0,0,2*Math.PI);
      ctx.fillStyle=p.col;ctx.fill();ctx.restore();
    }
    function update(){ctx.clearRect(0,0,W,H);
      for(let p of petals){p.x+=p.vx; p.y+=p.vy; p.rot+=p.vr; if(p.y>H+40){p.y=-40;p.x=rand(0,W);} drawPetal(p)}
      requestAnimationFrame(update);
    }
    update();

    // mouse tulip trail
    addEventListener('mousemove',(e)=>{
      const t={x:e.clientX+rand(-12,12),y:e.clientY+rand(-12,12),vx:rand(-1,1),vy:rand(-1,1),r:rand(6,10),rot:rand(0,6.28),vr:rand(-0.08,0.08),col:`rgba(255,${120+~~rand(0,120)},${160+~~rand(0,80)},1)`};
      petals.push(t); if(petals.length>180) petals.splice(0,20);
    })

    // ---------- Hearts game (Find My Heart) ----------
    const heartsEl=document.getElementById('hearts');
    const heartsData=[];
    function makeHearts(){
      heartsEl.innerHTML=''; heartsData.length=0;
      const n=8; const correctIndex = Math.floor(Math.random()*n);
      for(let i=0;i<n;i++){
        const div=document.createElement('div'); div.className='heart';
        div.innerHTML = `<svg viewBox="0 0 24 24"><path d=\"M12 21s-8-4.8-8-10.3S8.1 3 12 6.2 20 3 20 10.7 12 21 12 21z\" fill=\"${i===correctIndex?'#ff5ca8':'#ffffff'}\" /></svg>`;
        heartsEl.appendChild(div);
        const hint = i===correctIndex? 'Real Love' : '...?'
        div.addEventListener('click',()=>{
          if(i===correctIndex){
            showToast("You found my heart ‚ù§Ô∏è");
            // tiny celebration
            explodeAt(div);
          } else {
            showToast("Not this one ‚Äî try again ‚ò∫Ô∏è");
            div.animate([{transform:'translateY(0)'},{transform:'translateY(-10px) rotate(-6deg)'},{transform:'translateY(0)'}],{duration:420});
          }
        })
      }
    }
    makeHearts();

    function explodeAt(el){
      const rect=el.getBoundingClientRect();
      for(let i=0;i<16;i++){
        const p=document.createElement('div'); p.style.position='fixed'; p.style.left=(rect.left+rect.width/2)+'px'; p.style.top=(rect.top+rect.height/2)+'px';
        p.style.width='8px'; p.style.height='8px'; p.style.borderRadius='4px'; p.style.background= i%2? 'rgba(255,100,160,0.95)':'rgba(255,190,220,0.95)'; p.style.zIndex=9999; p.style.pointerEvents='none';
        document.body.appendChild(p);
        const dx = (Math.random()-0.5)*120; const dy=(Math.random()-0.9)*120;
        p.animate([{transform:`translate(0,0) scale(1)`},{transform:`translate(${dx}px,${dy}px) scale(.2)`}],{duration:700+Math.random()*400,easing:'cubic-bezier(.2,.8,.2,1)'}).onfinish=()=>p.remove();
      }
    }

    // ---------- Moving tulip clicker ----------
    const tulip = document.getElementById('moving-tulip');
    let tulipArea = document.getElementById('tulip-area');
    let tx = 50, ty = 50, tvx=1.2, tvy=0.6;
    function moveTulip(){
      const rect = tulipArea.getBoundingClientRect();
      tx += tvx; ty += tvy; if(tx<8||tx>92) tvx*=-1; if(ty<18||ty>78) tvy*=-1;
      tulip.style.left = tx+'%'; tulip.style.top = ty+'%';
      requestAnimationFrame(moveTulip);
    }
    moveTulip();
    let tulipClicks=0;
    tulip.addEventListener('click',()=>{
      tulipClicks++;
      const msgs = [
        'This tulip smells like your laugh',
        'Every petal remembers your name',
        'One more tulip for Ria',
        'Your tulips outshine the sky'
      ];
      showToast(msgs[tulipClicks%msgs.length]);
      if(tulipClicks>=4) { showToast('You caught many tulips ‚Äî you must be patient and kind üå∑'); tulipClicks=0 }
    })

    // ---------- Compatibility meter ----------
    document.getElementById('calc-compat').addEventListener('click',()=>{
      const nm = document.getElementById('name-input').value.trim();
      if(!nm){showToast('Type a name (try Ria)'); return}
      const fill = document.getElementById('compat-fill');
      const percentEl = document.getElementById('compat-percent');
      // cute deterministic mapping: hash name -> nice high value
      let h=0; for(let ch of (nm.toLowerCase()+"_priyanshu")){h = (h*31 + ch.charCodeAt(0)) % 1000}
      let val = 90 + (h % 11) + Math.floor(Math.random()*4); if(nm.toLowerCase().includes('ria')) val = 100;
      fill.style.width = val+'%'; percentEl.textContent = val+'%';
      showToast('Compatibility calculated ‚Äî obvious result üòå');
    })

    // ---------- Unlock puzzle ----------
    const order = ['eyes','smile','heart']; // correct order
    let progress=[];
    document.querySelectorAll('.puzzle button').forEach(b=>{
      b.addEventListener('click',()=>{
        const k=b.dataset.key; progress.push(k);
        b.animate([{transform:'scale(1)'},{transform:'scale(0.92)'}],{duration:160,fill:'forwards'});
        if(progress.length===order.length){
          if(progress.join(',')===order.join(',')){
            showToast('Heart unlocked ‚ù§Ô∏è'); openProposal();
          } else { showToast('Not quite ‚Äî try another combination'); }
          progress=[];
        }
      })
    })

    // ---------- Proposal modal handling ----------
    const modal = document.getElementById('proposal-modal');
    document.getElementById('open-propose').addEventListener('click',openProposal);
    function openProposal(){
      document.getElementById('proposal-poem').textContent = '"' + poemText.split('\n').slice(0,6).join(' ') + '..."';
      modal.classList.add('show');
      // soft focus
      setTimeout(()=>{
        // little ring + tulip explosion
        for(let i=0;i<36;i++) explodeAt(document.querySelector('.logo'));
      },420)
    }
    document.getElementById('no-btn').addEventListener('click',()=>{
      // playful dodge
      const btn = document.getElementById('no-btn');
      btn.style.transform = `translate(${Math.random()*160-80}px, ${Math.random()*80-40}px)`;
      showToast('No is shy ‚Äî try again üôÇ');
    });
    document.getElementById('yes-btn').addEventListener('click',()=>{
      modal.classList.remove('show');
      celebrateYes();
      // final big reveal
      setTimeout(()=>{
        showFinalScreen();
      },350);
    });

    function celebrateYes(){
      // big falling tulips effect
      for(let i=0;i<120;i++){ setTimeout(()=>{petals.push({x:rand(0,W),y:-40,vx:rand(-0.8,0.8),vy:rand(1,3),r:rand(8,16),rot:rand(0,6.28),vr:rand(-0.02,0.02),col:`rgba(255,${120+~~rand(0,120)},${160+~~rand(0,80)},1)`})}, i*10)}
      showToast('She said YES ‚Äî fireworks of tulips!');
    }

    function showFinalScreen(){
      // simple full-screen dedication
      const full=document.createElement('div'); full.style.position='fixed'; full.style.inset=0; full.style.zIndex=9999; full.style.display='flex'; full.style.alignItems='center'; full.style.justifyContent='center'; full.style.flexDirection='column';
      full.style.background='linear-gradient(180deg, rgba(7,3,10,0.95), rgba(6,2,9,0.96))';
      full.innerHTML = `<div style=\"text-align:center;color:white;max-width:980px;padding:24px\"><h1 style=\"font-size:44px;margin-bottom:8px;color:var(--accent)\">Ria ‚Äî will you marry me?</h1><p style=\"color:rgba(255,255,255,0.8);font-size:18px;line-height:1.6\">${poemText.replace(/\n/g,'<br/>')}</p><div style=\"margin-top:18px\"><button id=\"final-love\" style=\"padding:12px 18px;border-radius:12px;border:0;background:linear-gradient(90deg,var(--accent),var(--accent2));color:#111;font-weight:700;\">Always</button></div></div>`;
      document.body.appendChild(full);
      document.getElementById('final-love').addEventListener('click',()=>{
        showToast('Forever starts now üå∑');
        full.animate([{opacity:1},{opacity:0}],{duration:1200,delay:1400}).onfinish=()=>full.remove();
      })
    }

    // ---------- simple toast ----------
    let toastTimer; function showToast(text){
      let t=document.getElementById('site-toast'); if(!t){t=document.createElement('div');t.id='site-toast';t.style.position='fixed';t.style.right='22px';t.style.bottom='22px';t.style.padding='12px 16px';t.style.borderRadius='12px';t.style.background='linear-gradient(90deg, rgba(0,0,0,0.6), rgba(255,255,255,0.02))';t.style.color='white';t.style.zIndex=9999;document.body.appendChild(t);} t.textContent=text; t.animate([{opacity:0,transform:'translateY(8px)'},{opacity:1,transform:'translateY(0)'}],{duration:260}); clearTimeout(toastTimer); toastTimer=setTimeout(()=>{t.animate([{opacity:1,transform:'translateY(0)'},{opacity:0,transform:'translateY(8px)'}],{duration:380}).onfinish=()=>t.remove()},2600);
    }

    // ---------- tiny audio with WebAudio API (no external files) ----------
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    let playing=false; let musicNode=null;
    function playTune(){
      if(playing){ audioCtx.suspend(); playing=false; document.getElementById('play-music').textContent='Play music'; return}
      audioCtx.resume(); playing=true; document.getElementById('play-music').textContent='Pause music';
      // small arpeggio using oscillator + gain
      const master = audioCtx.createGain(); master.gain.value=0.08; master.connect(audioCtx.destination);
      const notes=[440,554.37,659.25,880]; let i=0;
      musicNode = setInterval(()=>{
        const osc = audioCtx.createOscillator(); const gain = audioCtx.createGain(); osc.type='sine'; osc.frequency.value=notes[i%notes.length]; gain.gain.value=0.0001;
        osc.connect(gain); gain.connect(master);
        const now=audioCtx.currentTime; gain.gain.setValueAtTime(0.0001, now); gain.gain.exponentialRampToValueAtTime(0.12, now+0.02); gain.gain.exponentialRampToValueAtTime(0.0001, now+0.6);
        osc.start(now); osc.stop(now+0.7);
        i++; if(!playing){ clearInterval(musicNode); musicNode=null }
      },420);
    }
    document.getElementById('play-music').addEventListener('click',playTune);

    // ---------- small interactions: open proposal when poetic lines clicked ----------
    document.getElementById('poem').addEventListener('dblclick',()=>{ openProposal(); showToast('You found the secret line ‚Äî I get shy now'); });

    // close modal on outside click
    modal.addEventListener('click',(e)=>{ if(e.target===modal) modal.classList.remove('show') });

    // sprinkle tiny cursor sparkles
    document.addEventListener('click',(e)=>{
      const s=document.createElement('div'); s.style.position='fixed'; s.style.left=e.clientX+'px'; s.style.top=e.clientY+'px'; s.style.width='8px'; s.style.height='8px'; s.style.borderRadius='50%'; s.style.background='radial-gradient(circle at 30% 30%, #fff, rgba(255,90,150,0.9))'; s.style.zIndex=9999; s.style.pointerEvents='none'; document.body.appendChild(s);
      s.animate([{opacity:1,transform:'translateY(0) scale(1)'},{opacity:0,transform:'translateY(-30px) scale(.5)'}],{duration:900}).onfinish=()=>s.remove();
    })

    // accessibility: keyboard open
    document.addEventListener('keydown',(e)=>{ if(e.key==='Enter') openProposal(); })

    // little ring animation on logo hover
    document.querySelector('.logo').addEventListener('mouseenter',()=>{explodeAt(document.querySelector('.logo'))});

    // small helper random
    function rand(a,b){return a+Math.random()*(b-a)}

  </script>
</body>
</html>

